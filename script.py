 #!/usr/bin/python
# -*- coding: UTF-8 -*-

import os, re

def GA():
    tf = 'MAX'
    fi = 'img/lena.png'
    t  = 'PNG'
#          1    2     3     4     5     6    7    8    9    10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29  30
    k  = [ 7  , 7   , 7   , 7   , 7   , 8  , 8  , 8  , 8  , 8  , 6  , 6  , 6  , 6  , 9  , 9  , 9  , 9  , 9  , 7  , 7  , 7  , 8  , 8  , 8  , 8  , 10 ,    10 , 10 , 10 ]
    i =  [ 30 , 30  , 30  , 30  , 30  , 30 , 30 , 30 , 30 , 30 , 30 , 30 , 30 , 5  , 10 , 15 , 20 , 25 , 20 , 10 , 10 , 20 , 20 , 20 , 20 , 50 , 30 , 15 , 20 , 30 ]
    pm = [0.05, 0.05, 0.05, 0.05, 0.05, 0.1, 0.2, 0.3, 0.5, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.3, 0.3, 0.8, 0.6, 0.1, 0.1, 0.2, 0.3, 1.0, 0.5]
    pc = [1.0 , 1.0 , 1.0 , 1.0 , 1.0 , 1.0, 1.0, 1.0, 1.0, 0.2, 0.4, 0.6, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.7, 0.8, 0.8, 0.8, 0.8, 1.0, 0.8, 0.5, 0.7, 0.7, 0.9]
    tt = [10  , 15  , 20  , 25  , 30  , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 3  , 5  , 8  , 10 , 13 , 5  , 5  , 3  , 5  , 5  , 5  , 10 , 5  , 10 , 10 , 20 , 25 ]

    out = open('GA', 'w')
    out.write('ofdb\tk\ti\tpm\tpc\ttt\n')

    for n in range(30):
        fo = 'GA'+str(n+1)+'.png'
        args = '--a GA --tf ' + tf + ' --fi ' + fi + ' --fo ' + fo + ' --t ' + t + ' --k ' + str(k[n]) + ' --i ' + str(i[n]) + ' --pm ' + str(pm[n]) + ' --pc ' + str(pc[n]) + ' --tt ' + str(tt[n])
        res = os.popen('./mhs ' + args)

        co = 0

        for line in res.readlines():
            if co == 2 and line == 'Mejorando solución...':
                noI = True

            if  noI == False:
                if co == 5:
                    ofdb = re.search('\d+.\d+', line).group()
            else:
                if co == 6:
                    ofdb = re.search('\d+.\d+', line).group()

            co += 1


        out.write(str(ofdb) + '\t' + str(k[n]) + '\t' + str(i[n]) + '\t' + str(pm[n]) + '\t' + str(pc[n]) + '\t' + str(tt[n]) + '\n')

def Bee():
    tf = 'MAX'
    fi = 'img/lena.png'
    t  = 'PNG'
#          1    2     3     4     5     6    7    8    9    10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29  30
    k  = [ 7  , 7   , 7   , 7   , 7   , 8  , 8  , 8  , 8  , 8  , 6  , 6  , 6  , 6  , 9  , 9  , 9  , 9  , 9  , 7  , 7  , 7  , 8  , 8  , 8  , 8  , 10 ,    10 , 10 , 10 ]
    i =  [ 30 , 30  , 30  , 30  , 30  , 30 , 30 , 30 , 30 , 30 , 30 , 30 , 30 , 5  , 10 , 15 , 20 , 25 , 20 , 10 , 10 , 20 , 20 , 20 , 20 , 50 , 30 , 15 , 20 , 30 ]
    m =  [ 30 , 30  , 30  , 30  , 30  , 30 , 30 , 30 , 30 , 30 , 30 , 30 , 30 , 5  , 10 , 15 , 20 , 25 , 20 , 10 , 10 , 20 , 20 , 20 , 20 , 50 , 30 , 15 , 20 , 30 ]
    e = [0.05, 0.05, 0.05, 0.05, 0.05, 0.1, 0.2, 0.3, 0.5, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.3, 0.3, 0.8, 0.6, 0.1, 0.1, 0.2, 0.3, 1.0, 0.5]
    eb = [10  , 15  , 20  , 25  , 30  , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 3  , 5  , 8  , 10 , 13 , 5  , 5  , 3  , 5  , 5  , 5  , 10 , 5  , 10 , 10 , 20 , 25 ]
    ob = [10  , 15  , 20  , 25  , 30  , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 3  , 5  , 8  , 10 , 13 , 5  , 5  , 3  , 5  , 5  , 5  , 10 , 5  , 10 , 10 , 20 , 25 ]

    out = open('Bee', 'w')
    out.write('ofdb\tk\ti\tm\te\teb\tob\n')

    for n in range(30):
        fo = 'Bee'+str(n+1)+'.png'
        args = '--a Bee --tf ' + tf + ' --fi ' + fi + ' --fo ' + fo + ' --t ' + t + ' --k ' + str(k[n]) + ' --i ' + str(i[n]) + ' --m ' + str(m[n]) + ' --e ' + str(e[n]) + ' --eb ' + str(eb[n]) + ' --ob ' + str(ob[n])
        res = os.popen('./mhs ' + args)

        co = 0

        for line in res.readlines():
            if co == 2 and line == 'Mejorando solución...':
                noI = True

            if  noI == False:
                if co == 5:
                    ofdb = re.search('\d+.\d+', line).group()
            else:
                if co == 6:
                    ofdb = re.search('\d+.\d+', line).group()

            co += 1

        out.write(str(ofdb) + '\t' + str(k[n]) + '\t' + str(i[n]) + '\t' + str(m[n]) + '\t' + str(e[n]) + '\t' + str(eb[n]) + '\t' + str(ob[n]) + '\n')

def PSOW():
    tf = 'MAX'
    fi = 'img/lena.png'
    t  = 'PNG'
#           1      2      3      4      5      6      7      8      9      10     11    12     13     14     15     16     17     18     19     20   21     22     23     24   25     26     27     28     29   30
    k  =  [ 7    , 7    , 7    , 7    , 7    , 8    , 8    , 8    , 8    , 8    , 6   , 6    , 6    , 6    , 9    , 9    , 9    , 9    , 9    , 7    , 7    , 7    , 8    , 8    , 8   , 8   , 10  ,    10, 10  , 10   ]
    i =   [ 30   , 30   , 30   , 30   , 30   , 30   , 30   , 30   , 30   , 30   , 30  , 30   , 30   , 5    , 10   , 15   , 20   , 25   , 20   , 10   , 10   , 20   , 20   , 20   , 20  , 50  , 30  , 15  , 20   , 30   ]
    c1 =  [ 0.5  , 0.5  , 0.5  , 0.5  , 0.5  , 1.75 , 0.5  , 1.5  , 3.0  , 0.3  , 0.75, 0.75 , 0.75 , 0.75 , 0.75 , 2.5  , 2.5  , 2.5  , 1.3  , 0.3  , 1.0  , 3.2  , 1.5  , 2.34 , 0.45, 1.12, 2.12, 1.5 , 2.0  , 3.0  ]
    c2 =  [ 0.5  , 0.5  , 0.5  , 0.5  , 0.5  , 0.5  , 1.75 , 0.5  , 2.0  , 0.1  , 0.75, 0.75 , 0.75 , 0.75 , 0.75 , 2.5  , 2.5  , 2.5  , 0.5  , 0.2  , 0.3  , 0.3  , 2.5  , 0.6  , 2.4 , 0.1 , 2.05, 3.0 , 1.0  , 0.5  ]
    w =   [ 1.5  , 1.5  , 1.5  , 1.5  , 1.5  , 1.5  , 1.5  , 3.5  , 5.0  , 0.8  , 1.5 , 1.5  , 1.5  , 1.5  , 1.5  , 8.5  , 8.5  , 8.5  , 1.0  , 0.9  , 2.7  , 3.0  , 4.0  , 3.0  , 2.5 , 1.5 , 3.75, 2.5 , 2.34 , 4.0  ]
    w1 =  [ 0.33 , 0.5  , 0.25 , 0.25 , 0.16 , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.2 , 0.2  , 0.2  , 0.33 , 0.5  , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.2  , 0.5  , 0.2  , 0.2  , 0.33, 0.3 , 0.33, 0.19, 0.33 , 0.57 ]
    w2 =  [ 0.33 , 0.25 , 0.5  , 0.25 , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.4 , 0.4  , 0.4  , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.4  , 0.2  , 0.5  , 0.3  , 0.33, 0.4 , 0.33, 0.45, 0.33 , 0.28 ]
    w3 =  [ 0.33 , 0.25 , 0.25 , 0.5  , 0.5  , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.4 , 0.4  , 0.4  , 0.33 , 0.16 , 0.33 , 0.33 , 0.33 , 0.33 , 0.33 , 0.4  , 0.3  , 0.3  , 0.5  , 0.33, 0.3 , 0.33, 0.36, 0.33 , 0.15 ]
    vmx = [ 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 50.0, 100.0, 150.0, 200.0, 250.0, 175.0, 175.0, 175.0, 123.5, 255.0, 130.0, 160.0, 187.0, 232.0, 55.0, 24.0, 5.0 , 99.0, 210.0, 217.0]


    out = open('PSOW', 'w')
    out.write('ofdb\tk\ti\tc1\tc2\tw\tw1\tw2\tw3\tvmx\n')

    for n in range(30):
        fo = 'PSOW'+str(n+1)+'.png'
        args = '--a PSO  --weighted --tf ' + tf + ' --fi ' + fi + ' --fo ' + fo + ' --t ' + t + ' --k ' + str(k[n]) + ' --i ' + str(i[n]) + ' --c1 ' + str(c1[n]) + ' --c2 ' + str(c2[n]) + ' --w ' + str(w[n]) + ' --w1 ' + str(w1[n]) + ' --w2 ' + str(w2[n]) + ' --w3 ' + str(w3[n]) + ' --vmx ' + str(vmx[n]) + ' --weighted  --mx 255,255,255 --mn 0,0,0'
        res = os.popen('./mhs ' + args)

        co = 0

        noI = False

        for line in res.readlines():
            if co == 2 and line == 'Mejorando solución...':
                noI = True

            if  noI == False:
                if co == 5:
                    ofdb = re.search('\d+.\d+', line).group()
            else:
                if co == 6:
                    ofdb = re.search('\d+.\d+', line).group()

            co += 1

        out.write(str(ofdb) + '\t' + str(k[n]) + '\t' + str(i[n]) + '\t' + str(c1[n]) + '\t' + str(c2[n]) + '\t' + str(w[n]) + '\t' + str(w1[n]) + '\t' + str(w2[n]) + '\t' + str(w3[n]) + '\t' + str(vmx[n]) + '\n')

def PSONW():
    tf = 'MAX'
    fi = 'img/lena.png'
    t  = 'PNG'
#           1      2      3      4      5      6      7      8      9      10     11    12     13     14     15     16     17     18     19     20   21     22     23     24   25     26     27     28     29   30
    k  =  [ 7    , 7    , 7    , 7    , 7    , 8    , 8    , 8    , 8    , 8    , 6   , 6    , 6    , 6    , 9    , 9    , 9    , 9    , 9    , 7    , 7    , 7    , 8    , 8    , 8   , 8   , 10  ,    10, 10  , 10   ]
    i =   [ 30   , 30   , 30   , 30   , 30   , 30   , 30   , 30   , 30   , 30   , 30  , 30   , 30   , 5    , 10   , 15   , 20   , 25   , 20   , 10   , 10   , 20   , 20   , 20   , 20  , 50  , 30  , 15  , 20   , 30   ]
    c1 =  [ 0.12 , 0.5  , 2.94 , 1.32 , 2.12 , 1.75 , 0.5  , 1.5  , 3.0  , 0.3  , 0.75, 0.75 , 0.75 , 0.75 , 0.75 , 2.5  , 2.5  , 2.5  , 1.3  , 0.3  , 1.0  , 3.2  , 1.5  , 2.34 , 0.45, 1.12, 2.12, 1.5 , 2.0  , 3.0  ]
    c2 =  [ 1.0  , 0.5  , 0.5  , 1.52 , 1.63 , 0.5  , 1.75 , 0.5  , 2.0  , 0.1  , 0.75, 0.75 , 0.75 , 0.75 , 0.75 , 2.5  , 2.5  , 2.5  , 0.5  , 0.2  , 0.3  , 0.3  , 2.5  , 0.6  , 3.0 , 0.1 , 2.05, 3.0 , 1.0  , 0.5  ]
    w =   [ 1.5  , 1.5  , 1.5  , 2.43 , 4.16 , 1.5  , 1.5  , 3.5  , 5.0  , 0.8  , 1.5 , 1.5  , 1.5  , 1.5  , 1.5  , 8.5  , 8.5  , 8.5  , 1.0  , 0.9  , 2.7  , 3.0  , 4.0  , 3.0  , 2.5 , 1.5 , 3.75, 2.5 , 2.34 , 4.0  ]
    vmx = [ 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 50.0, 100.0, 150.0, 200.0, 250.0, 175.0, 175.0, 175.0, 123.5, 255.0, 130.0, 160.0, 187.0, 232.0, 55.0, 24.0, 5.0 , 99.0, 210.0, 217.0]


    out = open('PSONW', 'w')
    out.write('ofdb\tk\ti\tc1\tc2\tw\tvmx\n')

    for n in range(30):
        fo = 'PSONW'+str(n+1)+'.png'
        args = '--a PSO --tf ' + tf + ' --fi ' + fi + ' --fo ' + fo + ' --t ' + t + ' --k ' + str(k[n]) + ' --i ' + str(i[n]) + ' --c1 ' + str(c1[n]) + ' --c2 ' + str(c2[n]) + ' --w ' + str(w[n]) + ' --vmx ' + str(vmx[n]) + ' --mx 255,255,255 --mn 0,0,0'
        res = os.popen('./mhs ' + args)

        co = 0

        noI = False

        for line in res.readlines():
            if co == 2 and line == 'Mejorando solución...':
                noI = True

            if  noI == False:
                if co == 5:
                    ofdb = re.search('\d+.\d+', line).group()
            else:
                if co == 6:
                    ofdb = re.search('\d+.\d+', line).group()

            co += 1

        out.write(str(ofdb) + '\t' + str(k[n]) + '\t' + str(i[n]) + '\t' + str(c1[n]) + '\t' + str(c2[n]) + '\t' + str(w[n]) + '\t' + '\t' + str(vmx[n]) + '\n')

def DEFCr():
    tf = 'MAX'
    fi = 'img/lena.png'
    t  = 'PNG'
#          1   2      3     4     5     6     7     8     9     10    11   12   13   14    15   16    17    18     19    20    21    22    23   24   25    26    27    28    29    30
    k  = [ 7  , 7   , 7   , 7   , 7   , 8   , 8   , 8   , 8   , 8   , 6  , 6  , 6  , 6   , 9   , 9   , 9   , 9   , 9   , 7   , 7   , 7   , 8  , 8  , 8   , 8   , 10  , 10  , 10  , 10  ]
    i =  [ 30 , 30  , 30  , 30  , 30  , 20  , 20  , 20  , 20  , 20  , 15 , 15 , 15 , 15  , 10  , 15  , 20  , 25  , 20  , 10  , 10  , 20  , 20 , 20 , 20  , 50  , 30  , 15  , 20  , 30  ]
    f = [0.5  , 0.5 , 0.5 , 0.5 , 0.5 , 0.7 , 0.7 , 0.7 , 0.7 , 0.7 , 0.6, 0.8, 0.9, 1.0 , 0.75, 0.55, 0.75, 0.75, 0.75, 0.85, 0.95, 0.65, 0.8, 0.6, 0.95, 0.75, 0.2 , 0.3 , 1.0 , 0.5 ]
    cr = [0.8 , 0.8 , 0.8 , 0.8 , 0.8 , 0.2 , 0.4 , 0.6 , 0.8 , 1.0 , 0.1, 0.8, 0.8, 0.8 , 0.5 , 0.7 , 0.75, 0.75, 0.75, 0.2 , 0.3 , 0.4 , 0.8, 0.6, 0.1 , 0.75, 0.2 , 0.6 , 0.5 , 0.5 ]
    w1 = [0.33, 0.5 , 0.25, 0.25, 0.16, 0.33, 0.33, 0.33, 0.33, 0.33, 0.2, 0.2, 0.2, 0.33, 0.5 , 0.33, 0.33, 0.33, 0.33, 0.33, 0.2 , 0.5 , 0.2, 0.2, 0.33, 0.3 , 0.33, 0.19, 0.33, 0.57]
    w2 = [0.33, 0.25, 0.5 , 0.25, 0.33, 0.33, 0.33, 0.33, 0.33, 0.33, 0.4, 0.4, 0.4, 0.33, 0.33, 0.33, 0.33, 0.33, 0.33, 0.33, 0.4 , 0.2 , 0.5, 0.3, 0.33, 0.4 , 0.33, 0.45, 0.33, 0.28]
    w3 = [0.33, 0.25, 0.25, 0.5 , 0.5 , 0.33, 0.33, 0.33, 0.33, 0.33, 0.4, 0.4, 0.4, 0.33, 0.16, 0.33, 0.33, 0.33, 0.33, 0.33, 0.4 , 0.3 , 0.3, 0.5, 0.33, 0.3 , 0.33, 0.36, 0.33, 0.15]


    out = open('DEFCr', 'w')
    out.write('ofdb\tk\ti\tf\tcr\tw1\tw2\tw3\n')

    for n in range(30):
        fo = 'DEFCr'+str(n+1)+'.png'
        args = '--a DE --tf ' + tf + ' --fi ' + fi + ' --fo ' + fo + ' --t ' + t + ' --k ' + str(k[n]) + ' --i ' + str(i[n]) + ' --f ' + str(f[n]) + ' --pc ' + str(cr[n]) + ' --w1 ' + str(w1[n]) + ' --w2 ' + str(w2[n]) + ' --w3 ' + str(w3[n]) + ' --mx 255,255,255 --mn 0,0,0'

        print './mhs ' + args

        res = os.popen('./mhs ' + args)

        co = 0

        noI = False

        for line in res.readlines():
            if co == 2 and line == 'Mejorando solución...':
                noI = True

            if  noI == False:
                if co == 5:
                    ofdb = re.search('\d+.\d+', line).group()
            else:
                if co == 6:
                    ofdb = re.search('\d+.\d+', line).group()

            co += 1

        out.write(str(ofdb) + '\t' + str(k[n]) + '\t' + str(i[n]) + '\t' + str(f[n]) + '\t' + str(cr[n]) + '\t' + str(w1[n]) + '\t' + '\t' + str(w2[n]) + '\t' + str(w3[n]) + '\n')

def DE():
    tf = 'MAX'
    fi = 'img/lena.png'
    t  = 'PNG'
#          1    2     3     4     5     6     7     8     9     10    11   12   13   14    15    16    17    18    19    20    21    22    23   24   25    26    27    28    29    30
    k  = [ 7  , 7   , 7   , 7   , 7   , 8   , 8   , 8   , 8   , 8   , 6  , 6  , 6  , 6   , 9   , 9   , 9   , 9   , 9   , 7   , 7   , 7   , 8  , 8  , 8   , 8   , 10  , 10  , 10  , 10 ]
    i =  [ 30 , 30  , 30  , 30  , 30  , 20  , 20  , 20  , 20  , 20  , 15 , 15 , 15 , 15  , 10  , 15  , 20  , 25  , 20  , 10  , 10  , 20  , 20 , 20 , 20  , 50  , 30  , 15  , 20  , 30 ]
    w1 = [0.33, 0.5 , 0.25, 0.25, 0.16, 0.33, 0.33, 0.33, 0.33, 0.33, 0.2, 0.2, 0.2, 0.33, 0.5 , 0.33, 0.33, 0.33, 0.33, 0.33, 0.2 , 0.5 , 0.2, 0.2, 0.33, 0.3 , 0.33, 0.19, 0.33, 0.57]
    w2 = [0.33, 0.25, 0.5 , 0.25, 0.33, 0.33, 0.33, 0.33, 0.33, 0.33, 0.4, 0.4, 0.4, 0.33, 0.33, 0.33, 0.33, 0.33, 0.33, 0.33, 0.4 , 0.2 , 0.5, 0.3, 0.33, 0.4 , 0.33, 0.45, 0.33, 0.28]
    w3 = [0.33, 0.25, 0.25, 0.5 , 0.5 , 0.33, 0.33, 0.33, 0.33, 0.33, 0.4, 0.4, 0.4, 0.33, 0.16, 0.33, 0.33, 0.33, 0.33, 0.33, 0.4 , 0.3 , 0.3, 0.5, 0.33, 0.3 , 0.33, 0.36, 0.33, 0.15]


    out = open('DEFCr', 'w')
    out.write('ofdb\tk\ti\tw1\tw2\tw3\n')

    for n in range(30):
        fo = 'DE'+str(n+1)+'.png'
        args = '--a DE --tf ' + tf + ' --fi ' + fi + ' --fo ' + fo + ' --t ' + t + ' --k ' + str(k[n]) + ' --i ' + str(i[n]) + ' --w1 ' + str(w1[n]) + ' --w2 ' + str(w2[n]) + ' --w3 ' + str(w3[n]) + ' --mx 255,255,255 --mn 0,0,0'
        res = os.popen('./mhs ' + args)

        co = 0

        noI = False

        for line in res.readlines():
            if co == 2 and line == 'Mejorando solución...':
                noI = True

            if  noI == False:
                if co == 5:
                    ofdb = re.search('\d+.\d+', line).group()
            else:
                if co == 6:
                    ofdb = re.search('\d+.\d+', line).group()

            co += 1

        out.write(str(ofdb) + '\t' + str(k[n]) + '\t' + str(i[n]) + '\t' + str(w1[n]) + '\t' + '\t' + str(w2[n]) + '\t' + str(w3[n]) + '\n')


if __name__ == '__main__':
    GA()
    Bee()
    PSOW()
    PSONW()
    DEFCr()
    DE()
    
